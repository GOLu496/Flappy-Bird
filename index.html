<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Flappy Bird Red - Responsive</title>
<style>
    body {
        margin: 0;
        background: #70c5ce;
        overflow: hidden;
        font-family: Arial, sans-serif;
    }
    #scoreBoard {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 24px;
        color: white;
        text-shadow: 2px 2px 4px #000;
        z-index: 10;
    }
    #ad-container {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        text-align: center;
        background: #fff;
        padding: 5px;
        border-top: 1px solid #ccc;
        z-index: 10;
    }
    canvas {
        display: block;
        margin: 0 auto;
        background: #70c5ce;
    }
</style>
</head>
<body>

<div id="scoreBoard">Score: 0</div>
<canvas id="gameCanvas"></canvas>

<div id="ad-container">
    <!-- Replace with your real AdSense code after approval -->
    <p style="font-size:14px;color:#333;">[Ad Banner Here]</p>
</div>

<script>
// ===== Responsive Setup =====
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Base resolution for scaling
const baseWidth = 320;
const baseHeight = 480;
let scale = 1;

function resizeCanvas() {
    // Match canvas to screen size but keep aspect ratio
    const w = window.innerWidth;
    const h = window.innerHeight - 50; // minus ad height
    scale = Math.min(w / baseWidth, h / baseHeight);
    canvas.width = baseWidth * scale;
    canvas.height = baseHeight * scale;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// ===== GAME VARIABLES =====
let frames = 0;
let score = sessionStorage.getItem("flappyScore") ? parseInt(sessionStorage.getItem("flappyScore")) : 0;
const gravity = 0.25 * scale;
const jump = 4.6 * scale;
let pipes = [];
const pipeGap = 85 * scale;
const pipeWidth = 53 * scale;
let gameSpeed = 2 * scale;
const groundY = baseHeight * scale - 60 * scale; // Red line position

// ===== GAME STATE =====
let state = 0; // 0 = ready, 1 = playing, 2 = over

// ===== BIRD =====
let bird = {
    x: 50 * scale,
    y: 150 * scale,
    radius: 12 * scale,
    speed: 0,
    draw: function(){
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fillStyle = "red";
        ctx.fill();
        ctx.closePath();
    },
    flap: function(){
        this.speed = -jump;
    },
    update: function(){
        this.speed += gravity;
        this.y += this.speed;

        // Red line collision
        if(this.y + this.radius >= groundY){
            this.y = groundY - this.radius;
            state = 2; // Game over
        }
    }
};

// ===== PIPE LOGIC =====
function spawnPipe(){
    let yPos = -150 * scale * (Math.random() + 1);
    pipes.push({ x: canvas.width, y: yPos });
}
function drawPipes(){
    ctx.fillStyle = "green";
    pipes.forEach(p => {
        ctx.fillRect(p.x, p.y, pipeWidth, 400 * scale); // top
        ctx.fillRect(p.x, p.y + 400 * scale + pipeGap, pipeWidth, 400 * scale); // bottom
    });
}
function updatePipes(){
    pipes.forEach((p, i) => {
        p.x -= gameSpeed;

        // Collision check
        if (bird.x + bird.radius > p.x && bird.x - bird.radius < p.x + pipeWidth &&
            (bird.y - bird.radius < p.y + 400 * scale || bird.y + bird.radius > p.y + 400 * scale + pipeGap)) {
            state = 2;
        }

        // Remove off-screen pipes & add score
        if(p.x + pipeWidth <= 0){
            pipes.splice(i, 1);
            score++;
            sessionStorage.setItem("flappyScore", score);
        }
    });
}

// ===== DRAW GROUND LINE =====
function drawGround(){
    ctx.fillStyle = "red";
    ctx.fillRect(0, groundY, canvas.width, 5 * scale); // thin red line
}

// ===== GAME LOOP =====
function draw(){
    ctx.fillStyle = "#70c5ce";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    drawPipes();
    bi
